<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            height: 75%;
            max-width: 75%;
            margin: auto;
        }
    </style>
    <script src="http://maps.google.com/maps/api/js?key=AIzaSyA28Tncg4T22upFoAz_n9LgrMTQ_O3uv9k" type="text/javascript"></script>
</head>
<body>
BeerFinder
<div id="map"></div>
{#<script>#}
{#    // This requires that you consent to location sharing when#}
{#    // prompted by your browser. If you see the error "The Geolocation service#}
{#    // failed.", it means you probably did not give permission for the browser to#}
{#    // locate you.#}
{##}
{#    function initMap() {#}
{#        var map = new google.maps.Map(document.getElementById('map'), {#}
{#            center: {lat: 44.4972, lng: 124.0827},#}
{#            zoom: 6#}
{#        });#}
{#        var infoWindow = new google.maps.InfoWindow({map: map});#}
{##}
{#        var vendors = [{'lat': 44.0521, 'lng': 123.0868, 'name': 'eugene'}, {#}
{#            'lat': 44.569949,#}
{#            'lng': -123.278285,#}
{#            'name': 'corvallis'#}
{#        }];#}
{#        // Try HTML5 geolocation.#}
{#        if (navigator.geolocation) {#}
{#            navigator.geolocation.getCurrentPosition(function (position) {#}
{#                var pos = {#}
{#                    lat: position.coords.latitude,#}
{#                    lng: position.coords.longitude#}
{#                };#}
{#                for (i = 0; i < locations.length; i++) {#}
{#                    marker = new google.maps.Marker({#}
{#                        position: new google.maps.LatLng(vendors[i].lat, vendors[i].lng),#}
{#                        map: map#}
{#                    });#}
{#                }#}
{#                google.maps.event.addListener(marker, 'click', (function (marker, i) {#}
{#                    return function () {#}
{#                        infowindow.setContent(locations[i][0]);#}
{#                        infowindow.open(map, marker);#}
{#                    }#}
{#                })(marker, i));#}
{#            })}#}
{##}
{#            infoWindow.setPosition(pos);#}
{#            infoWindow.setContent('Location found.');#}
{#            map.setCenter(pos);#}
{#        }#}
{#    ,#}
{#        function () {#}
{#            handleLocationError(true, infoWindow, map.getCenter());#}
{#        }#}
{#    #}
{#    } else#}
{#    {#}
{#        // Browser doesn't support Geolocation#}
{#        handleLocationError(false, infoWindow, map.getCenter());#}
{#    }#}
{##}
{##}
{#    }#}
{##}
{##}
{#    function handleLocationError(browserHasGeolocation, infoWindow, pos) {#}
{#        infoWindow.setPosition(pos);#}
{#        infoWindow.setContent(browserHasGeolocation ?#}
{#                'Error: The Geolocation service failed.' :#}
{#                'Error: Your browser doesn\'t support geolocation.');#}
{#    }#}
{#</script>#}
<script type="text/javascript">
    var vendors = {{ markers|safe }};
    console.log(vendors.length);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: {lat: 44.4972, lng: -124.0827},
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < vendors.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(vendors[i].lat, vendors[i].lng),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(vendors[i].name);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script>
{#<script async defer#}
{#        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA28Tncg4T22upFoAz_n9LgrMTQ_O3uv9k&callback=initMap">#}
{#</script>#}
</body>

</html>